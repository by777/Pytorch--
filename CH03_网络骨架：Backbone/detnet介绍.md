# DetNet

如VGG和ResNet等，究其根本是为了图像分类任务而设计的。但图像分类和检测任务天然存在落差，分类任务侧重于全图特征的提取，深层的特征图分辨率较低，而目标检测特征图分辨率不宜过低，因此造成了以下两种缺陷：

+ 大物体难以定位：FPN的采样率较大，边缘难以精确预测
+ 小物体难以检测：小物体在浅层的语义信息较弱，几乎不可见

DetNet选用ResNet作为基础结构，*旷视科技*引入了空洞卷积。

DetNet仍选择性能卓越的ResNet-50作为基础结构。并且保持前4个stage与Resnet-50相同，具体的结构细节有以下3点：

1. 引入了一个新的Stage 6，用于物体检测。Stage 5和Stage 6使用了DetNet提出的Bottleneck结构，最大的特点是利用空洞数为2的3x3卷积取代了步长为2的3x3卷积。
2. Stage 5与Stage 6的每一个Bottlneck输出的特征图尺寸都为原图的1/16。通道数都为256，而传统的Backbone通常是特征图尺寸递减，通道数递增。
3. 在组成特征金字塔时，由于特征图大小完全相同，因此可以直接从右往左传递相加，避免了上采样。为了进一步融合各通道的特征，需要对每一阶段的输出进行1x1卷积后再与后一Stage传回的特征相加。

DetNet这种精心设计的结构，在增加感受野的同时，获得了极大的特征图尺寸，有利于物体的定位。与此同时，由于各Stage的特征图尺寸相同，避免了上采样，降低了计算量，又有利于小物体的检测。

![image-20210714160152104](https://raw.githubusercontent.com/by777/imgRep/main/img/20210714160152.png)

